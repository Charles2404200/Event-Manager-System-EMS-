<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="org.ems.application.controller.DashboardController"
            prefWidth="1400" prefHeight="900">

    <!-- TOP: Header with user info -->
    <top>
        <VBox style="-fx-background-color: #2c3e50; -fx-padding: 20;" spacing="10">
            <HBox spacing="20" alignment="CENTER_LEFT">
                <VBox spacing="5">
                    <Label fx:id="userNameLabel" text="Welcome, User"
                           style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: white;"/>
                    <HBox spacing="30">
                        <Label fx:id="userRoleLabel" text="Role: Unknown"
                               style="-fx-font-size: 13; -fx-text-fill: #ecf0f1;"/>
                        <Label fx:id="userEmailLabel" text="email@example.com"
                               style="-fx-font-size: 13; -fx-text-fill: #ecf0f1;"/>
                    </HBox>
                </VBox>

                <VBox style="-fx-padding: 0 0 0 auto;" spacing="10">
                    <Button text="ðŸ‘¤ Profile" prefWidth="120"
                           style="-fx-padding: 8 15; -fx-font-size: 12; -fx-cursor: hand;"
                           onAction="#onUpdateProfile"/>
                    <Button text="ðŸšª Logout" prefWidth="120"
                           style="-fx-padding: 8 15; -fx-font-size: 12; -fx-cursor: hand; -fx-text-fill: #e74c3c;"
                           onAction="#onLogout"/>
                </VBox>
            </HBox>
        </VBox>
    </top>

    <!-- CENTER: Role-based content -->
    <center>
        <ScrollPane fitToWidth="true">
            <VBox spacing="0" style="-fx-padding: 0;">

                <!-- ==================== ATTENDEE SECTION ==================== -->
                <VBox fx:id="attendeeSection" spacing="20" style="-fx-padding: 30;" visible="false">
                    <Label text="ðŸ“š Attendee Dashboard" style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>

                    <!-- Quick Actions -->
                    <VBox spacing="15" style="-fx-border-color: #ddd; -fx-border-width: 1; -fx-padding: 20; -fx-border-radius: 5; -fx-background-color: #f9f9f9;">
                        <Label text="ðŸŽ¯ Quick Actions" style="-fx-font-size: 16; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                        <HBox spacing="15">
                            <Button text="ðŸ” Browse Events" prefWidth="200" prefHeight="60"
                                   style="-fx-padding: 15; -fx-font-size: 12; -fx-cursor: hand; -fx-background-color: #3498db; -fx-text-fill: white; -fx-border-radius: 5;"
                                   onAction="#onBrowseEvents"/>
                            <Button text="ðŸŽ« My Tickets" prefWidth="200" prefHeight="60"
                                   style="-fx-padding: 15; -fx-font-size: 12; -fx-cursor: hand; -fx-background-color: #2ecc71; -fx-text-fill: white; -fx-border-radius: 5;"
                                   onAction="#onViewMyTickets"/>
                            <Button text="ðŸ“‹ My Registrations" prefWidth="200" prefHeight="60"
                                   style="-fx-padding: 15; -fx-font-size: 12; -fx-cursor: hand; -fx-background-color: #f39c12; -fx-text-fill: white; -fx-border-radius: 5;"
                                   onAction="#onViewMyRegistrations"/>
                            <Button text="ðŸ“… Export Schedule" prefWidth="200" prefHeight="60"
                                   style="-fx-padding: 15; -fx-font-size: 12; -fx-cursor: hand; -fx-background-color: #9b59b6; -fx-text-fill: white; -fx-border-radius: 5;"
                                   onAction="#onExportMySchedule"/>
                        </HBox>
                    </VBox>

                    <!-- Upcoming Events / Tickets -->
                    <VBox spacing="15" style="-fx-border-color: #ddd; -fx-border-width: 1; -fx-padding: 20; -fx-border-radius: 5; -fx-background-color: white;">
                        <Label text="ðŸ“… Your Upcoming Events" style="-fx-font-size: 14; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                        <Label text="No upcoming events - Browse and register for events to see them here"
                               style="-fx-font-size: 12; -fx-text-fill: #999;"/>
                    </VBox>
                </VBox>

                <!-- ==================== PRESENTER SECTION ==================== -->
                <VBox fx:id="presenterSection" spacing="20" style="-fx-padding: 30;" visible="false">
                    <Label text="ðŸŽ¤ Presenter Dashboard" style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>

                    <!-- Quick Actions -->
                    <VBox spacing="15" style="-fx-border-color: #ddd; -fx-border-width: 1; -fx-padding: 20; -fx-border-radius: 5; -fx-background-color: #f9f9f9;">
                        <Label text="ðŸŽ¯ Quick Actions" style="-fx-font-size: 16; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                        <HBox spacing="15">
                            <Button text="ðŸ“ My Sessions" prefWidth="180" prefHeight="60"
                                   style="-fx-padding: 15; -fx-font-size: 12; -fx-cursor: hand; -fx-background-color: #3498db; -fx-text-fill: white; -fx-border-radius: 5;"
                                   onAction="#onViewAssignedSessions"/>
                            <Button text="ðŸ“¤ Upload Materials" prefWidth="180" prefHeight="60"
                                   style="-fx-padding: 15; -fx-font-size: 12; -fx-cursor: hand; -fx-background-color: #2ecc71; -fx-text-fill: white; -fx-border-radius: 5;"
                                   onAction="#onUploadMaterials"/>
                            <Button text="ðŸ“Š Statistics" prefWidth="180" prefHeight="60"
                                   style="-fx-padding: 15; -fx-font-size: 12; -fx-cursor: hand; -fx-background-color: #f39c12; -fx-text-fill: white; -fx-border-radius: 5;"
                                   onAction="#onViewPresenterStats"/>
                            <Button text="ðŸ“¤ Export Summary" prefWidth="180" prefHeight="60"
                                   style="-fx-padding: 15; -fx-font-size: 12; -fx-cursor: hand; -fx-background-color: #9b59b6; -fx-text-fill: white; -fx-border-radius: 5;"
                                   onAction="#onExportPresenterSummary"/>
                        </HBox>
                    </VBox>

                    <!-- Session Stats -->
                    <HBox spacing="15">
                        <VBox style="-fx-border-color: #3498db; -fx-border-width: 1; -fx-padding: 15; -fx-border-radius: 5; -fx-background-color: #ecf0f1;" spacing="5" prefWidth="200">
                            <Label text="Sessions Assigned" style="-fx-font-size: 12; -fx-text-fill: #2c3e50;"/>
                            <Label fx:id="nOAssignedSessions" style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #3498db;"/>
                        </VBox>
                        <VBox style="-fx-border-color: #2ecc71; -fx-border-width: 1; -fx-padding: 15; -fx-border-radius: 5; -fx-background-color: #ecf0f1;" spacing="5" prefWidth="200">
                            <Label text="Total Audience" style="-fx-font-size: 12; -fx-text-fill: #2c3e50;"/>
                            <Label text="0" style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #2ecc71;"/>
                        </VBox>
                        <VBox style="-fx-border-color: #f39c12; -fx-border-width: 1; -fx-padding: 15; -fx-border-radius: 5; -fx-background-color: #ecf0f1;" spacing="5" prefWidth="200">
                            <Label text="Upcoming Sessions" style="-fx-font-size: 12; -fx-text-fill: #2c3e50;"/>
                            <Label text="0" style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #f39c12;"/>
                        </VBox>
                    </HBox>
                </VBox>

                <!-- ==================== EVENT ADMIN SECTION ==================== -->
                <VBox fx:id="eventAdminSection" spacing="20" style="-fx-padding: 30;" visible="false">
                    <Label text="ðŸ“‹ Event Administrator Dashboard" style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>

                    <!-- Management Actions -->
                    <VBox spacing="15" style="-fx-border-color: #ddd; -fx-border-width: 1; -fx-padding: 20; -fx-border-radius: 5; -fx-background-color: #f9f9f9;">
                        <Label text="âš™ï¸ Management Tools" style="-fx-font-size: 16; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                        <HBox spacing="15">
                            <Button text="ðŸ“… Manage Events" prefWidth="180" prefHeight="60"
                                   style="-fx-padding: 15; -fx-font-size: 12; -fx-cursor: hand; -fx-background-color: #3498db; -fx-text-fill: white; -fx-border-radius: 5;"
                                   onAction="#onManageEvents"/>
                            <Button text="ðŸŽ¤ Manage Sessions" prefWidth="180" prefHeight="60"
                                   style="-fx-padding: 15; -fx-font-size: 12; -fx-cursor: hand; -fx-background-color: #2ecc71; -fx-text-fill: white; -fx-border-radius: 5;"
                                   onAction="#onManageSessions"/>
                            <Button text="ðŸŽ« Manage Tickets" prefWidth="180" prefHeight="60"
                                   style="-fx-padding: 15; -fx-font-size: 12; -fx-cursor: hand; -fx-background-color: #f39c12; -fx-text-fill: white; -fx-border-radius: 5;"
                                   onAction="#onManageTickets"/>
                            <Button text="ðŸ‘¤ Assign Presenters" prefWidth="180" prefHeight="60"
                                   style="-fx-padding: 15; -fx-font-size: 12; -fx-cursor: hand; -fx-background-color: #9b59b6; -fx-text-fill: white; -fx-border-radius: 5;"
                                   onAction="#onAssignPresenters"/>
                        </HBox>
                    </VBox>

                    <!-- Reports -->
                    <VBox spacing="15" style="-fx-border-color: #ddd; -fx-border-width: 1; -fx-padding: 20; -fx-border-radius: 5; -fx-background-color: white;">
                        <Label text="ðŸ“Š Reporting" style="-fx-font-size: 16; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                        <HBox spacing="15">
                            <Button text="ðŸ“ˆ Generate Reports" prefWidth="180" prefHeight="50"
                                   style="-fx-padding: 12; -fx-font-size: 12; -fx-cursor: hand; -fx-background-color: #e74c3c; -fx-text-fill: white; -fx-border-radius: 5;"
                                   onAction="#onGenerateEventReports"/>
                        </HBox>
                    </VBox>

                    <!-- Event Stats -->
                    <HBox spacing="15">
                        <VBox style="-fx-border-color: #3498db; -fx-border-width: 1; -fx-padding: 15; -fx-border-radius: 5; -fx-background-color: #ecf0f1;" spacing="5" prefWidth="200">
                            <Label text="Total Events" style="-fx-font-size: 12; -fx-text-fill: #2c3e50;"/>
                            <Label text="0" style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #3498db;"/>
                        </VBox>
                        <VBox style="-fx-border-color: #2ecc71; -fx-border-width: 1; -fx-padding: 15; -fx-border-radius: 5; -fx-background-color: #ecf0f1;" spacing="5" prefWidth="200">
                            <Label text="Total Sessions" style="-fx-font-size: 12; -fx-text-fill: #2c3e50;"/>
                            <Label text="0" style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #2ecc71;"/>
                        </VBox>
                        <VBox style="-fx-border-color: #f39c12; -fx-border-width: 1; -fx-padding: 15; -fx-border-radius: 5; -fx-background-color: #ecf0f1;" spacing="5" prefWidth="200">
                            <Label text="Total Tickets" style="-fx-font-size: 12; -fx-text-fill: #2c3e50;"/>
                            <Label text="0" style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #f39c12;"/>
                        </VBox>
                        <VBox style="-fx-border-color: #9b59b6; -fx-border-width: 1; -fx-padding: 15; -fx-border-radius: 5; -fx-background-color: #ecf0f1;" spacing="5" prefWidth="200">
                            <Label text="Presenters" style="-fx-font-size: 12; -fx-text-fill: #2c3e50;"/>
                            <Label text="0" style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #9b59b6;"/>
                        </VBox>
                    </HBox>
                </VBox>

                <!-- ==================== SYSTEM ADMIN SECTION ==================== -->
                <VBox fx:id="systemAdminSection" spacing="20" style="-fx-padding: 30;" visible="false">
                    <Label text="âš¡ System Administrator Dashboard" style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>

                    <!-- Admin Panel Links -->
                    <VBox spacing="15" style="-fx-border-color: #ddd; -fx-border-width: 1; -fx-padding: 20; -fx-border-radius: 5; -fx-background-color: #f9f9f9;">
                        <Label text="ðŸ” System Management" style="-fx-font-size: 16; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                        <HBox spacing="15">
                            <Button text="ðŸ‘¥ Manage Users" prefWidth="150" prefHeight="60"
                                   style="-fx-padding: 15; -fx-font-size: 12; -fx-cursor: hand; -fx-background-color: #3498db; -fx-text-fill: white; -fx-border-radius: 5;"
                                   onAction="#onManageUsers"/>
                            <Button text="ðŸ“… Manage Events" prefWidth="150" prefHeight="60"
                                   style="-fx-padding: 15; -fx-font-size: 12; -fx-cursor: hand; -fx-background-color: #2ecc71; -fx-text-fill: white; -fx-border-radius: 5;"
                                   onAction="#onManageAllEvents"/>
                            <Button text="ðŸŽ¤ Manage Sessions" prefWidth="150" prefHeight="60"
                                   style="-fx-padding: 15; -fx-font-size: 12; -fx-cursor: hand; -fx-background-color: #f39c12; -fx-text-fill: white; -fx-border-radius: 5;"
                                   onAction="#onManageAllSessions"/>
                            <Button text="âš™ï¸ Settings" prefWidth="150" prefHeight="60"
                                   style="-fx-padding: 15; -fx-font-size: 12; -fx-cursor: hand; -fx-background-color: #95a5a6; -fx-text-fill: white; -fx-border-radius: 5;"
                                   onAction="#onSystemSettings"/>
                        </HBox>
                    </VBox>

                    <!-- Reporting and Monitoring -->
                    <VBox spacing="15" style="-fx-border-color: #ddd; -fx-border-width: 1; -fx-padding: 20; -fx-border-radius: 5; -fx-background-color: white;">
                        <Label text="ðŸ“Š Reporting and Monitoring" style="-fx-font-size: 16; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                        <HBox spacing="15">
                            <Button text="ðŸ“ˆ System Reports" prefWidth="150" prefHeight="50"
                                   style="-fx-padding: 12; -fx-font-size: 12; -fx-cursor: hand; -fx-background-color: #e74c3c; -fx-text-fill: white; -fx-border-radius: 5;"
                                   onAction="#onViewSystemReports"/>
                            <Button text="ðŸ“œ Activity Logs" prefWidth="150" prefHeight="50"
                                   style="-fx-padding: 12; -fx-font-size: 12; -fx-cursor: hand; -fx-background-color: #c0392b; -fx-text-fill: white; -fx-border-radius: 5;"
                                   onAction="#onViewActivityLogs"/>
                        </HBox>
                    </VBox>

                    <!-- System Stats -->
                    <HBox spacing="15">
                        <VBox style="-fx-border-color: #3498db; -fx-border-width: 1; -fx-padding: 15; -fx-border-radius: 5; -fx-background-color: #ecf0f1;" spacing="5" prefWidth="200">
                            <Label text="Total Users" style="-fx-font-size: 12; -fx-text-fill: #2c3e50;"/>
                            <Label text="0" style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #3498db;"/>
                        </VBox>
                        <VBox style="-fx-border-color: #2ecc71; -fx-border-width: 1; -fx-padding: 15; -fx-border-radius: 5; -fx-background-color: #ecf0f1;" spacing="5" prefWidth="200">
                            <Label text="Total Events" style="-fx-font-size: 12; -fx-text-fill: #2c3e50;"/>
                            <Label text="0" style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #2ecc71;"/>
                        </VBox>
                        <VBox style="-fx-border-color: #f39c12; -fx-border-width: 1; -fx-padding: 15; -fx-border-radius: 5; -fx-background-color: #ecf0f1;" spacing="5" prefWidth="200">
                            <Label text="Total Sessions" style="-fx-font-size: 12; -fx-text-fill: #2c3e50;"/>
                            <Label text="0" style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #f39c12;"/>
                        </VBox>
                        <VBox style="-fx-border-color: #9b59b6; -fx-border-width: 1; -fx-padding: 15; -fx-border-radius: 5; -fx-background-color: #ecf0f1;" spacing="5" prefWidth="200">
                            <Label text="Total Tickets" style="-fx-font-size: 12; -fx-text-fill: #2c3e50;"/>
                            <Label text="0" style="-fx-font-size: 28; -fx-font-weight: bold; -fx-text-fill: #9b59b6;"/>
                        </VBox>
                    </HBox>

                    <!-- Recent Activity -->
                    <VBox spacing="10" style="-fx-border-color: #ddd; -fx-border-width: 1; -fx-padding: 20; -fx-border-radius: 5; -fx-background-color: white;">
                        <Label text="ðŸ“ Recent System Activity" style="-fx-font-size: 14; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                        <Label text="No recent activity" style="-fx-font-size: 12; -fx-text-fill: #999;"/>
                    </VBox>
                </VBox>

            </VBox>
        </ScrollPane>
    </center>

</BorderPane>
