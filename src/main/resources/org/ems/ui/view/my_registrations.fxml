<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.fxml.com/javafx/21" xmlns:fx="http://javafx.fxml.com/fxml/1"
            fx:controller="org.ems.application.controller.MyRegistrationsController"
            prefWidth="1400" prefHeight="900"
            style="-fx-font-family: 'Segoe UI'; -fx-font-size: 11;">

    <!-- Top: Title Section -->
    <top>
        <VBox spacing="0" style="-fx-background-color: #2c3e50; -fx-padding: 15;">
            <Label text="ðŸ“‹ Register for Sessions"
                   style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: white;"/>
            <Label text="View all available sessions, check materials, and manage your registrations"
                   style="-fx-font-size: 12; -fx-text-fill: #ecf0f1;"/>
        </VBox>
    </top>

    <!-- Center: Main Content -->
    <center>
        <VBox spacing="15" style="-fx-padding: 20; -fx-background-color: #f5f5f5;">

            <!-- Event Selection -->
            <HBox spacing="10" style="-fx-background-color: white; -fx-border-color: #ddd; -fx-border-width: 1; -fx-padding: 15; -fx-border-radius: 5;">
                <Label text="ðŸ“Œ Select Event:"
                       style="-fx-font-size: 12; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                <ComboBox fx:id="eventCombo" prefWidth="350"
                         style="-fx-padding: 8; -fx-font-size: 11;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label fx:id="recordCountLabel" text="Total Sessions: 0"
                       style="-fx-font-size: 11; -fx-text-fill: #666;"/>
            </HBox>

            <!-- Main Sessions Table Container -->
            <VBox style="-fx-background-color: white; -fx-border-color: #ddd; -fx-border-width: 1; -fx-padding: 10; -fx-border-radius: 5;" VBox.vgrow="ALWAYS">

                <!-- Loading Placeholder -->
                <VBox fx:id="loadingPlaceholder"
                      alignment="CENTER"
                      spacing="15"
                      style="-fx-alignment: center; -fx-padding: 100;"
                      VBox.vgrow="ALWAYS">
                    <Label text="â³ Loading sessions..."
                           style="-fx-font-size: 16; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                    <ProgressBar fx:id="loadingProgressBar" prefWidth="300" prefHeight="20"/>
                    <Label fx:id="loadingPercentLabel" text="0%"
                           style="-fx-font-size: 12; -fx-text-fill: #666;"/>
                </VBox>

                <!-- Sessions Container (Table View) -->
                <VBox fx:id="sessionsContainer" spacing="0" VBox.vgrow="ALWAYS" visible="false" managed="false"/>

            </VBox>

            <!-- Materials Section -->
            <VBox spacing="8" style="-fx-background-color: white; -fx-border-color: #ddd; -fx-border-width: 1; -fx-padding: 15; -fx-border-radius: 5;">
                <VBox fx:id="materialsContainer" spacing="8">
                    <Label text="ðŸ“š Session Materials"
                           style="-fx-font-size: 13; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                    <Label text="â„¹ï¸ Materials will appear here for selected event"
                           style="-fx-font-size: 11; -fx-text-fill: #999;"/>
                </VBox>
            </VBox>

        </VBox>
    </center>

    <!-- Bottom: Info and Action Buttons -->
    <bottom>
        <VBox spacing="10" style="-fx-padding: 15; -fx-background-color: #f8f9fa; -fx-border-color: #ddd; -fx-border-width: 1 0 0 0;">
            <HBox spacing="10">
                <Button text="â† Back to Dashboard"
                        style="-fx-padding: 10 20; -fx-font-size: 12; -fx-cursor: hand; -fx-background-color: #2c3e50; -fx-text-fill: white;"
                        onAction="#onBack"/>
                <Region HBox.hgrow="ALWAYS"/>
            </HBox>
            <Label text="ðŸ’¡ Tip: Click 'Register' to join a session or 'Cancel' to remove your registration. View or download materials directly from the table."
                   style="-fx-font-size: 10; -fx-text-fill: #666; -fx-wrap-text: true;"/>
        </VBox>
    </bottom>

</BorderPane>
